http://developer.mbed.org/users/okano/code/IAP/#c8bf974ecb33
